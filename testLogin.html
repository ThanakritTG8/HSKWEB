<html lang="en">
  <head>
    <meta name="google-signin-scope" content="email" />
    <meta
      name="google-signin-client_id"
      content="429955392182-1uhrd21q2f612vrf8ml4m853qs5244vt.apps.googleusercontent.com"
    />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script src="https://apis.google.com/js/platform.js" async defer></script>
  </head>
  <body>
    <div style="padding: 100">
      <div
        class="fb-login-button"
        data-max-rows="1"
        data-size="large"
        data-button-type="login_with"
        scope="public_profile,email"
        onlogin="checkLoginState();"
        auto-logout-link="true"
      ></div>
    </div>
    <div class="g-signin2" data-onsuccess="onSignIn" data-theme="dark"></div>
    <button onclick="signOut();">Sign out</button>
    <script>
      function onSignIn(googleUser) {
        console.log("I am clicked");
        // Useful data for your client-side scripts:
        var profile = googleUser.getBasicProfile();
        console.log("ID: " + profile.getId()); // Don't send this directly to your server!
        console.log("Full Name: " + profile.getName());
        console.log("Given Name: " + profile.getGivenName());
        console.log("Family Name: " + profile.getFamilyName());
        console.log("Image URL: " + profile.getImageUrl());
        console.log("Email: " + profile.getEmail());

        // The ID token you need to pass to your backend:
        var id_token = googleUser.getAuthResponse().id_token;
        console.log("ID Token: " + id_token);
      }
      function signOut() {
        var auth2 = gapi.auth2.getAuthInstance();
        auth2.signOut().then(function () {
          console.log("User signed out.");
        });
      }
      var bFbStatus = false;
      var fbID = "";
      var fbName = "";
      var fbEmail = "";
      window.fbAsyncInit = function () {
        FB.init({
          appId: "291916392381954",
          cookie: true,
          xfbml: true,
          version: "v12.0",
        });
        FB.AppEvents.logPageView();
      };
      (function (d, s, id) {
        var js,
          fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {
          return;
        }
        js = d.createElement(s);
        js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
      })(document, "script", "facebook-jssdk");
      function statusChangeCallback(response) {
        if (bFbStatus == false) {
          fbID = response.authResponse.userID;
          if (response.status == "connected") {
            getCurrentUserInfo(response);
          } else {
            FB.login(
              function (response) {
                if (response.authResponse) {
                  getCurrentUserInfo(response);
                } else {
                  console.log("Auth cancelled.");
                }
              },
              { scope: "email" }
            );
          }
        }
        bFbStatus = true;
      }
      function getCurrentUserInfo() {
        FB.api("/me?fields=name,email", function (userInfo) {
          fbName = userInfo.name;
          fbEmail = userInfo.email;
          console.log(userInfo);
          console.log(fbID);
          console.log(fbName);
          console.log(fbEmail);
        });
      }
      function checkLoginState() {
        FB.getLoginStatus(function (response) {
          statusChangeCallback(response);
        });
      }
    </script>
  </body>
</html>
